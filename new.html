<!DOCTYPE html>
<html>

<head>

	<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.2.min.js"></script>
	<script type="text/javascript" src="ConnectJson.js"></script>
	<script type="text/javascript" src="Boolsearch.js"></script>

	<link rel="stylesheet" href="./style/style.min.css" type="text/css">
	<link rel="stylesheet" href="./style/hub.style.css" type="text/css">

	<style type="text/css" media="screen">
		html {
			margin-top: 32px !important;
		}

		* html body {
			margin-top: 32px !important;
		}

		@media screen and ( max-width: 782px) {
			html {
				margin-top: 46px !important;
			}
			* html body {
				margin-top: 46px !important;
			}
		}
	</style>


</head>

<!-- jQuery UI Autocomple for Geographic Area.  Data retrieve from json file -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript">
	var jQuery_1 = $.noConflict(true);
</script>

<script type="text/javascript">
	function split(val) {
		return val.split(/\s*OR\s*/);
		//return val.split(/,\s*/);
	}

	function extractLast(term) {
		return split(term).pop();
	}

	$(function() {

		//Stores the Geocodes as an array of codes to be processed later

		var geo_array = [];
		var getData = function(request, response) {
			jQuery_1.getJSON(

				"https://ciscotalenthub.github.io/TalentHub//geocodes.json?callback=?" + request.term,
				function(data) {
					var array = $.map(data.geocodes, function(item) {
						return {
							label: item.description,
							value: item.code
						}
					});
					response(jQuery_1.ui.autocomplete.filter(array, extractLast(request.term)));
				});
		};

		var selectItem = function(event, ui) {

			var areas = split(this.value);
			// remove the current input
			areas.pop();
			// add the selected item
			var geo = '"' + ui.item.label + '"';
			areas.push(geo);
			// add placeholder to get the comma-and-space at the end
			areas.push("");

			this.value = areas.join(" OR ");


			//$("#geoarea").val(ui.item.label);
			//var codes = ui.item.value;
			//if (codes) {
				//$("#geocode").val(codes);
			//} else {
				//$("#geocode").val(ui.item.value);
				geo_array.push(ui.item.value);
				$("#company").val(geo_array.join(" OR "));
				//$("#company").val(ui.item.value);
			//}

			return false;
		}

		jQuery_1("#geoarea").autocomplete({
			source: getData,
			select: selectItem,
			minLength: 2,
			focus: function() {
				// prevent value inserted on focus
				return false;
			},
		});

		//Job Titles Autocomplete
		var getTitle = function(request, response) {
			jQuery_1.getJSON(

				"https://ciscotalenthub.github.io/TalentHub//job_titles.json?callback=?" + request.term,
				function(data) {
					var array = $.map(data.titles, function(item) {
						return {
							label: item.label,
							value: item.value
						}
					});
					response(jQuery_1.ui.autocomplete.filter(array, extractLast(request.term)));
				});
		};

		var selectTitle = function(event, ui) {
			var terms = split(this.value);
			// remove the current input
			terms.pop();
			// add the selected item
			var title = '"' + ui.item.value + '"';
			terms.push(title);
			// add placeholder to get the comma-and-space at the end
			terms.push("");

			this.value = terms.join(" OR ");

			return false;
		}

		jQuery_1("#title").autocomplete({
			source: getTitle,
			select: selectTitle,
			minLength: 2,
			focus: function() {
				// prevent value inserted on focus
				return false;
			},
		});
	});
</script>

<body>

	<table cellspacing="2" cellpadding="3" width="100%" align="center">

		<colgroup>
			<col style="width: 6%;">
			<col span="2" style="width: 89%;">
			<col style="width: 5%;">
		</colgroup>

		<tbody>
			<tr>
				<td class="npb"><label for="where" id="where_label_top" aria-hidden="true"> </label></td>
				<td class="npb_header"><label for="what" id="what_label_top" aria-hidden="true">boolean</label></td>

			</tr>

			<tr>

				<td class="npb"><label for="where" id="where_label_top" aria-hidden="true"></label></td>
				<td class="npl epr"><span class="inwrap"><input class="input_text_main" type="search" maxlength="512" onclick="setBoolFocus('radio1')" onkeypress="handle_bool(event, 'bool1', 'results_body')" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="bool1"></td>
		<td><input type="radio" name="input_radio" class="bool_radio" value="bool1" checked="checked" id="radio1"></td>

		</tr>


		</tbody>
		</table>

	<!-- <body background=".\assets\background_grey.png"> -->
		<div id="main" class="clearfix width-100" style="padding-left:5px;padding-right:5px">
			<div class="fusion-row" style="max-width:100%;">
				<div id="content" class="full-width">
					<div id="post-8" class="post-8 page type-page status-publish hentry">



						<div class="post-content">
							<div class="fusion-fullwidth fullwidth-box hundred-percent-fullwidth" style='background-color: rgba(255,255,255,0);background-position: center center;background-repeat: no-repeat;padding-top:20px;padding-right:30px;padding-bottom:20px;padding-left:30px;'>
								<div class="fusion-builder-row fusion-row ">
									<div class="fusion-layout-column fusion_builder_column fusion_builder_column_1_2  fusion-one-half fusion-column-first 1_2" style='margin-top:0px;margin-bottom:20px;width:50%;width:calc(50% - ( ( 4% ) * 0.5 ) );margin-right: 4%;'>
										<div class="fusion-column-wrapper" style="background-position:left top;background-repeat:no-repeat;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;" data-bg-url="">
											<form action="#">


												<table cellspacing="2" cellpadding="3" width="100%" align="center">

													<colgroup>
														<col style="width: 5%;">
														<col span="2" style="width: 90%;">
														<col style="width: 5%;">

													</colgroup>

													<tbody>

														<tr>
															<td class="npb"><label for="where" id="where_label_top" aria-hidden="true"> </label></td>
															<td class="npb_header"><label for="what" id="what_label_top" aria-hidden="true">options</label></td>

														</tr>
<!--
														<tr>

															<td class="npb"><label for="where" id="where_label_top" aria-hidden="true"> </label></td>

															<td class="npl epr"><span class="inwrap"><input class="input_text" type="search" maxlength="512" onclick="setBoolFocus('radio1')" onkeypress="handle_bool(event, 'bool1', 'results_body')" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="bool1"></td>
<td><input type="radio" name="input_radio" class="bool_radio" value="bool1" checked="checked" id="radio1"></td>

</tr>
-->
<tr>
<td class="npb"><label for="where" id="where_label_top" aria-hidden="true">AND</label></td>

<td class="npl epr"><span class="inwrap"><input class="input_text" type="search" maxlength="512" onclick="setBoolFocus('radio2')" onkeypress="handle_bool(event, 'bool2', 'results_body')" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="bool2"></td>
<td><input type="radio" name="input_radio" class="bool_radio" value="bool2" id="radio2"></td>
</tr>

<tr>
<td class="npb"><label for="where" id="where_label_top" aria-hidden="true">AND</label></td>

<td class="npl epr"><span class="inwrap"><input class="input_text" type="search" maxlength="512" onclick="setBoolFocus('radio3')" onkeypress="handle_bool(event, 'bool3', 'results_body')" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="bool3"></td>
<td><input type="radio" name="input_radio" class="bool_radio" value="bool3" id="radio3"></td>
</tr>

<tr>
<td class="npb"><label for="where" id="where_label_top" aria-hidden="true">AND</label></td>

<td class="npl epr"><span class="inwrap"><input class="input_text" type="search" maxlength="512" onclick="setBoolFocus('radio4')" onkeypress="handle_bool(event, 'bool4', 'results_body')" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="bool4"></td>
<td><input type="radio" name="input_radio" class="bool_radio" value="bool4" id="radio4"></td>
</tr>

<tr>
<td class="npb"><label for="where" id="where_label_top" aria-hidden="true">NOT</label></td>

<td class="npl epr"><span class="inwrap"><input class="input_text" type="search" maxlength="512" onclick="setBoolFocus('bool_radio')" onkeypress="handle_bool(event, 'bool_not', 'results_body')" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="bool_not"></td>
<td><input type="radio" name="input_radio" class="bool_radio" value="bool_not" id="bool_radio"></td>
</tr>

<tr>
<td class="npb"><label for="where" id="where_label_top" aria-hidden="true"></label></td>

<td class="npl epr"><span class="inwrap"><input class="input_text" type="search" placeholder="Company" maxlength="512" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="company"></td>
</tr>

<tr>
<td class="npb"><label for="where" id="where_label_top" aria-hidden="true"></label></td>

<td class="npl epr"><span class="inwrap"><input class="input_text" type="search" placeholder="Job Title" maxlength="512" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="title"></td>
</tr>

<tr>
<td class="npb"><label for="where" id="where_label_top" aria-hidden="true"></label></td>

<td class="npl epr"><span class="inwrap"><input class="input_text" type="search" placeholder="Geographic Area" maxlength="512" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="geoarea"><input type="hidden" id="geocode"></td>
</tr>



</tbody>
</table>
<br>
<table cellspacing="2" cellpadding="3" width="100%" align="center">

    <colgroup>
       <col style="width: 50%;">
       <col style="width: 50%;">

    </colgroup>

<tbody>

<tr>

<td class="npl" style="width:1px" align="center">
<button id="fj" onclick="clearBoolean()" type="button" class="input_boolean" >Clear</button></td>

<td class="npl" style="width:1px" align="center">
<button id="fj" onclick="boolSearch('linkedin')" type="button" class="input_boolean" >Search</button>

</td>
</td>
</tr>


</tbody>
</table>

</form><div class="fusion-clearfix"></div>

			</div>
		</div><div  class="fusion-layout-column fusion_builder_column fusion_builder_column_1_2  fusion-one-half fusion-column-last 1_2"  style='margin-top:0px;margin-bottom:20px;width:50%;width:calc(50% - ( ( 4% ) * 0.5 ) );'>
			<div class="fusion-column-wrapper" style="background-position:left top;background-repeat:no-repeat;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;"  data-bg-url="">
				<div class="c-tab">
         <div class="c-tab__content">

<form action="#" onsubmit="handle(event, 'input_word', 'results_body')">

<table cellspacing="2" cellpadding="3" width="90%" align="center">

<colgroup>
	<col span="1" style="width: 75%;">
    <col span="1" style="width: 15%;">
</colgroup>

<tbody>
<tr>
<td class="npb_header"><label for="what" id="what_label_top" aria-hidden="true">keyword</label></td>
</tr>

<tr>
<td class="npl epr"><span class="inwrap"><input class="input_text" type="search" maxlength="512" style="width:97%" aria-labelledby="what_label_top hidden_colon what_label_bot" name="q" autocomplete="off" id="input_word"></span>
					<div style="width:250px">
						<!-- -->
				</td>

				<td class="npl" style="width:1px"><span class="inwrapBorder" style="width:100%"><span class="inwrapBorderTop"><button id="fj" onclick="getWords('input_word', 'results_body')" type="button" class="input_submit" >GO</button></span></span>
				</td>
			</tr>
			</tr>

		</tbody>
	</table>

	</table>
	</form>
	<p id="results_body"></p>
	<p style="text-align:center;"><img id="hubImage" src=".\assets\talent_hub1.png" style="visibility:visible"></img>
	</p>




	</div>
	</div>
	<div class="fusion-clearfix"></div>

	</div>
	</div>
	</div>
	</div>
	</div>
	</div>
	</div>

	</div>
	<!-- fusion-row -->
	</div>
	<!-- #main -->





	<div class="fusion-footer">


	</div>
	<!-- fusion-footer -->
	</div>
	<!-- wrapper -->
	<script>
		$("#bool1").css({
			"box-shadow": "0 0 5px rgba(81, 203, 238, 1)",
			"border": "5px solid rgba(81, 203, 238, 1)"
		});
	</script>

	<script>
		function boolSearch(website) {
			//Get all the values from the search fields and pass it to the search function
			var bool1 = document.getElementById("bool1").value;
			var bool2 = document.getElementById("bool2").value;
			var bool3 = document.getElementById("bool3").value;
			var bool4 = document.getElementById("bool4").value;
			var bool_not = document.getElementById("bool_not").value;
			var title = document.getElementById("title").value;
			var company = document.getElementById("company").value;
			var geoarea = document.getElementById("geoarea").value;

			//Geocode does not reset when Geoarea resets so manually reset Geocode to ""
			if (geoarea) {
				var geocode = document.getElementById("geocode").value;
			} else {
				var geocode = "";
			}


			openSearch(website, bool1, bool2, bool3, bool4, bool_not, title, company, geocode);

		}
	</script>

	<!-- Function to handle enter key event in search box's -->
	<script>
		function handle(e, input1, results_body) {
			e.preventDefault(); // Otherwise the form will be submitted
			getWords(input1, results_body);
		}
	</script>

	<!-- Function to handle enter key event in Boolean string box's -->
	<script>
		function handle_bool(e, input1, results_body) {
			if (e.keyCode == 13) {
				e.preventDefault(); // Otherwise the form will be submitted
				var bool_word = document.getElementById(input1).value;
				//If there is a quote("") inside the box then do nothing because only first word or phrase can be used
				if (!bool_word.includes('"')) {
					//add the value from boolean box to search word box
					document.getElementById("input_word").value = bool_word;
					getWords(input1, results_body);
					document.getElementById(input1).value = '"' + bool_word + '"';
				}
			}

		}
	</script>

	<!-- Calls jquery $.get() in ConnectJson.js to get keywords -->
	<script>
		function getWords(input1, results_body) {
			var search_word = document.getElementById(input1).value;
			document.getElementById("hubImage").style.visibility = 'hidden';

			testBox(search_word, results_body);
		}
	</script>

	<!-- Toggles the radio button to set focus on boolean field that has been clicked -->
	<script>
		function setBoolFocus(radio_button) {
			//If statement handles the main radio button associated with the main bool string because it is out of scope
			if (radio_button != 'radio1') {
				document.getElementById('radio1').checked = false;
			} else {
				document.getElementById('radio2').checked = false;
				document.getElementById('radio3').checked = false;
				document.getElementById('radio4').checked = false;
				document.getElementById('bool_radio').checked = false;
			}
			document.getElementById(radio_button).checked = true;
			var box = document.getElementById(radio_button).value;

			$("#bool1").css({
				"box-shadow": "",
				"border": ""
			});
			$("#bool2").css({
				"box-shadow": "",
				"border": ""
			});
			$("#bool3").css({
				"box-shadow": "",
				"border": ""
			});
			$("#bool4").css({
				"box-shadow": "",
				"border": ""
			});
			$("#bool_not").css({
				"box-shadow": "",
				"border": ""
			});
			$('#' + box).css({
				"box-shadow": "0 0 5px rgba(81, 203, 238, 1)",
				"border": "5px solid rgba(81, 203, 238, 1)"
			});

		}
	</script>


</body>

</html>
